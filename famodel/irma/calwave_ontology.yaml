type: draft/example of floating array ontology under construction
name: 
comments: 
# Site condition information
site:
    general:
        water_depth : 200        # [m]      uniform water depth
        rho_water   : 1025.0     # [kg/m^3] water density
        rho_air     : 1.225      # [kg/m^3] air density
        mu_air      : 1.81e-05   #          air dynamic viscosity
        #...
        
    boundaries:  # project or lease area boundary, via file or vertex list
        file:   # filename of x-y vertex coordinates [m]
        x_y:    # list of polygon vertices in order [m]
          - [-3000, -3000]
          - [-3000, 3000]
          - [3000, 3000]
          - [3000, -3000]
    
    bathymetry:
        file:   './calwave_bathymetry.txt'
    
    seabed:
      x : [-10901,    0,    10000]
      y : [-10900,     0,  10000 ]
    
      type_array:
        - [mud_soft ,  mud_firm ,   mud_soft]  
        - [mud_soft ,  mud_firm ,   mud_soft]  
        - [mud_soft ,  mud_firm ,   mud_soft]
      
      soil_types:  
        mud_soft:
          Su0 : [2.39]  # [kPa]
          k : [1.41]    # [kPa/m]
          depth: [0]    # [m]
        mud_firm:
          Su0 : [23.94] # [kPa]
          k : [2.67]    # [kPa/m]
          depth: [0]    # [m]   
    
    metocean:
        extremes:  # extreme values for specified return periods (in years)
            keys :   [ Hs  , Tp  , WindSpeed, TI, Shear, Gamma, CurrentSpeed ]
            data :
                1:   [   1  ,2     ,3     ]
                10:  [ 1    ,  2   , 3    ]
                50:  [  1   ,  2   ,  3   ]
                500: [  1   ,  2   ,   3  ]
                
        probabalistic_bins:
            keys : [ prob , Hs  , Tp, WindSpeed, TI, Shear, Gamma, CurrentSpeed, WindDir, WaveDir, CurrentDir  ]
            data :
                -  [ 0.010  ,  1 ,  1 ]
                -  [ 0.006  , 1  ,  1 ]
                -  [ 0.005  , 1  ,  1 ]
                
        time_series :
            file: 'metocean_timeseries.csv'
            
    resource :
        file: 'windresource'
        
    RAFT_cases:
        keys : [wind_speed, wind_heading, turbulence, turbine_status, yaw_misalign, wave_spectrum, wave_period, wave_height, wave_heading  ]
        data :  #   m/s        deg    % or e.g. IIB_NTM    string            deg         string          (s)         (m)         (deg)
            -  [     0,         0,            0,          operating,          0,        JONSWAP,         12,         6,           0        ]
            # -  [    16,         0,            IIB_NTM,    operating,          0,        JONSWAP,         12,         6,           30       ]
            # -  [    10.59,         0,            0.05,    operating,          0,        JONSWAP,         15.75,         11.86,         0       ]

    RAFT_settings:   
        min_freq     :  0.001    #  [Hz]       lowest frequency to consider, also the frequency bin width     
        max_freq     :  0.20    #  [Hz]       highest frequency to consider
        XiStart      :   0      # sets initial amplitude of each DOF for all frequencies
        nIter        :   4      # sets how many iterations to perform in Model.solveDynamics()

# ----- Array-level inputs -----

# Wind turbine array layout
array:
    keys : [ID, topsideID, platformID, mooringID,   x_location,     y_location,   heading_adjust]
    data : #        ID#        ID#        ID#          [m]             [m]           [deg]
        - [wec,     1,         1,         ms1,        -1600,         -1600,           180   ]   

# ----- turbines and platforms -----

topsides:
        
  - type          :     turbine
    mRNA          :     991000        #  [kg]       RNA mass 
    IxRNA         :          0        #  [kg-m2]    RNA moment of inertia about local x axis (assumed to be identical to rotor axis for now, as approx) [kg-m^2]
    IrRNA         :          0        #  [kg-m2]    RNA moment of inertia about local y or z axes [kg-m^2]
    xCG_RNA       :          0        #  [m]        x location of RNA center of mass [m] (Actual is ~= -0.27 m)
    hHub          :        150.0      #  [m]        hub height above water line [m]
    Fthrust       :       1500.0E3    #  [N]        temporary thrust force to use
    
    I_drivetrain: 318628138.0   # full rotor + drivetrain inertia as felt on the high-speed shaft
    
    nBlades     : 3          # number of blades
    Zhub        : 150.0      # hub height [m]
    Rhub        : 3.97       # hub radius [m]
    precone     : 4.0        # [deg]
    shaft_tilt  : 6.0        # [deg]
    overhang    : -12.0313    # [m]
    aeroMod     : 1          # 0 aerodynamics off; 1 aerodynamics on

platform:

  type         :  WEC
  potModMaster :   1      # [int] master switch for potMod variables; 0=keeps all member potMod vars the same, 1=turns all potMod vars to False (no HAMS), 2=turns all potMod vars to True (no strip)
  dlsMax       :  5.0     # maximum node splitting section amount for platform members; can't be 0
  qtfPath      :  'IEA-15-240-RWT-UMaineSemi.12d'      # path to the qtf file for the platform
  rFair        :  58
  zFair        :  -14

  members:   # list all members here
      
    - name      :  center_column             # [-]    an identifier (no longer has to be number)       
      type      :  2                         # [-]    
      rA        :  [ 0, 0, -20]              # [m]    end A coordinates
      rB        :  [ 0, 0,  15]              # [m]    and B coordinates
      shape     :  circ                      # [-]    circular or rectangular
      gamma     :  0.0                       # [deg]  twist angle about the member's z-axis
      potMod    :  True                      # [bool] Whether to model the member with potential flow (BEM model) plus viscous drag or purely strip theory
      # --- outer shell including hydro---
      stations  :  [0, 1]                    # [-]    location of stations along axis. Will be normalized such that start value maps to rA and end value to rB
      d         :  10.0                      # [m]    diameters if circular or side lengths if rectangular (can be pairs)
      t         :  0.05                      # [m]    wall thicknesses (scalar or list of same length as stations)
      Cd        :  0.6                       # [-]    transverse drag coefficient       (optional, scalar or list of same length as stations)
      Ca        :  0.93                      # [-]    transverse added mass coefficient (optional, scalar or list of same length as stations)
      CdEnd     :  0.6                       # [-]    end axial drag coefficient        (optional, scalar or list of same length as stations)
      CaEnd     :  1.0                       # [-]    end axial added mass coefficient  (optional, scalar or list of same length as stations)
      rho_shell :  7850                      # [kg/m3] 
      # --- handling of end caps or any internal structures if we need them ---
      cap_stations :  [ 0    ]               # [m]  location along member of any inner structures (in same scaling as set by 'stations')
      cap_t        :  [ 0.001  ]             # [m]  thickness of any internal structures
      cap_d_in     :  [ 0    ]               # [m]  inner diameter of internal structures (0 for full cap/bulkhead, >0 for a ring shape)

      
    - name      :  outer_column              # [-]    an identifier (no longer has to be number)       
      type      :  2                         # [-]    
      rA        :  [51.75, 0, -20]           # [m]    end A coordinates
      rB        :  [51.75, 0,  15]           # [m]    and B coordinates
      heading   :  [ 60, 180, 300]           # [deg]  heading rotation of column about z axis (for repeated members)
      shape     :  circ                      # [-]    circular or rectangular
      gamma     :  0.0                       # [deg]  twist angle about the member's z-axis
      potMod    :  True                      # [bool] Whether to model the member with potential flow (BEM model) plus viscous drag or purely strip theory
      # --- outer shell including hydro---
      stations  :  [0, 35]                    # [-]    location of stations along axis. Will be normalized such that start value maps to rA and end value to rB
      d         :  12.5                      # [m]    diameters if circular or side lengths if rectangular (can be pairs)
      t         :  0.05                      # [m]    wall thicknesses (scalar or list of same length as stations)
      Cd        :  0.6                       # [-]    transverse drag coefficient       (optional, scalar or list of same length as stations)
      Ca        :  0.93                      # [-]    transverse added mass coefficient (optional, scalar or list of same length as stations)
      CdEnd     :  1.0                       # [-]    end axial drag coefficient        (optional, scalar or list of same length as stations)
      CaEnd     :  0.7 # value of 3.0 gives more heave response        # [-]    end axial added mass coefficient  (optional, scalar or list of same length as stations)
      rho_shell :  7850                      # [kg/m3] 
      # --- ballast ---
      l_fill    :  1.4                       # [m]
      rho_fill  :  5000                      # [kg/m3]
      # --- handling of end caps or any internal structures if we need them ---
      cap_stations :  [ 0    ]               # [m]  location along member of any inner structures (in same scaling as set by 'stations')
      cap_t        :  [ 0.001  ]             # [m]  thickness of any internal structures
      cap_d_in     :  [ 0    ]               # [m]  inner diameter of internal structures (0 for full cap/bulkhead, >0 for a ring shape)

      
    - name      :  pontoon                   # [-]    an identifier (no longer has to be number)       
      type      :  2                         # [-]    
      rA        :  [  5  , 0, -16.5]         # [m]    end A coordinates
      rB        :  [ 45.5, 0, -16.5]         # [m]    and B coordinates
      heading   :  [ 60, 180, 300]           # [deg]  heading rotation of column about z axis (for repeated members)
      shape     :  rect                      # [-]    circular or rectangular
      gamma     :  0.0                       # [deg]  twist angle about the member's z-axis
      potMod    :  False                     # [bool] Whether to model the member with potential flow (BEM model) plus viscous drag or purely strip theory
      # --- outer shell including hydro---
      stations  :  [0, 40.5]                    # [-]    location of stations along axis. Will be normalized such that start value maps to rA and end value to rB
      d         :  [12.4, 7.0]               # [m]    diameters if circular or side lengths if rectangular (can be pairs)
      t         :  0.05                      # [m]    wall thicknesses (scalar or list of same length as stations)
      Cd        :  [1.5, 2.2 ]               # [-]    transverse drag coefficient       (optional, scalar or list of same length as stations)
      Ca        :  [2.2, 0.2 ]               # [-]    transverse added mass coefficient (optional, scalar or list of same length as stations)
      CdEnd     :  0.0                       # [-]    end axial drag coefficient        (optional, scalar or list of same length as stations)
      CaEnd     :  0.0                       # [-]    end axial added mass coefficient  (optional, scalar or list of same length as stations)
      rho_shell :  7850                      # [kg/m3]
      l_fill    :  40.5                      # [m]
      rho_fill  :  1025.0                    # [kg/m3]
      
      
    - name      :  upper_support             # [-]    an identifier (no longer has to be number)       
      type      :  2                         # [-]    
      rA        :  [  5  , 0, 14.545]        # [m]    end A coordinates
      rB        :  [ 45.5, 0, 14.545]        # [m]    and B coordinates
      heading   :  [ 60, 180, 300]           # [deg]  heading rotation of column about z axis (for repeated members)
      shape     :  circ                      # [-]    circular or rectangular
      gamma     :  0.0                       # [deg]  twist angle about the member's z-axis
      potMod    :  False                     # [bool] Whether to model the member with potential flow (BEM model) plus viscous drag or purely strip theory
      # --- outer shell including hydro---
      stations  :  [0, 1]                    # [-]    location of stations along axis. Will be normalized such that start value maps to rA and end value to rB
      d         :  0.91                      # [m]    diameters if circular or side lengths if rectangular (can be pairs)
      t         :  0.01                      # [m]    wall thicknesses (scalar or list of same length as stations)
      Cd        :  0.0                       # [-]    transverse drag coefficient       (optional, scalar or list of same length as stations)
      Ca        :  0.0                       # [-]    transverse added mass coefficient (optional, scalar or list of same length as stations)
      CdEnd     :  0.0                       # [-]    end axial drag coefficient        (optional, scalar or list of same length as stations)
      CaEnd     :  0.0                       # [-]    end axial added mass coefficient  (optional, scalar or list of same length as stations)
      rho_shell :  7850                      # [kg/m3]


# ----- Mooring system -----

# Mooring system descriptions (each for an individual FOWT with no sharing)
mooring_systems:
 
    ms1:
        name: 2-line semi-taut polyester mooring system with a third line shared
        
        keys: [MooringConfigID,  heading, anchorType, lengthAdjust] 
        data:
          - [  semitaut-poly_1,    0 ,    suction1,   0 ]
          - [  semitaut-poly_1,   90 ,    suction1,   0 ]
          - [  semitaut-poly_1,  180 ,    suction1,   0 ]
          - [  semitaut-poly_1,  270 ,    suction1,   0 ]


# Mooring line configurations
mooring_line_configs:

    semitaut-poly_1:  # mooring line configuration identifier
    
        name: Semitaut polyester configuration 1  # descriptive name
        
        span: 200
        
        sections:                     #in order from anchor to fairlead
          - mooringFamily: chain      # ID of a mooring line section type
            d_nom: .1549
            length: 10.7              # [m] usntretched length of line section
            adjustable: True          # flags that this section could be adjusted to accommodate different spacings...
          - connectorType: h_link   
          - mooringFamily: polyester  # ID of a mooring line section type
            d_nom: .182
            length: 199.8             # [m] length (unstretched)

# Mooring connector properties
mooring_connector_types:
    
    h_link:
        m  : 140    # [kg]  component mass
        v : 0.13    # [m^3] component volumetric displacement

# Anchor type properties
anchor_types:

    suction1:
        type   :  suction_pile
        L      :     16.4  # length of pile [m]
        D      :     5.45  # diameter of pile [m]
        zlug   :     9.32  # embedded depth of padeye [m]

